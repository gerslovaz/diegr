<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Database workflows for HD-EEG data in R • diegr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Database workflows for HD-EEG data in R">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">diegr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/diegr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Database-workflows-for-HD-EEG-data-in-R.html">Database workflows for HD-EEG data in R</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="Database-workflows-for-HD-EEG-data-in-R_files/htmltools-fill-0.5.9/fill.css" rel="stylesheet">
<script src="Database-workflows-for-HD-EEG-data-in-R_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="Database-workflows-for-HD-EEG-data-in-R_files/plotly-binding-4.12.0/plotly.js"></script><script src="Database-workflows-for-HD-EEG-data-in-R_files/mathjax-2.7.5/cdn.js"></script><script src="Database-workflows-for-HD-EEG-data-in-R_files/typedarray-0.1/typedarray.min.js"></script><link href="Database-workflows-for-HD-EEG-data-in-R_files/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="Database-workflows-for-HD-EEG-data-in-R_files/crosstalk-1.2.2/js/crosstalk.min.js"></script><link href="Database-workflows-for-HD-EEG-data-in-R_files/plotly-htmlwidgets-css-2.25.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="Database-workflows-for-HD-EEG-data-in-R_files/plotly-main-2.25.2/plotly-latest.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Database workflows for HD-EEG data in R</h1>
            
      

      <div class="d-none name"><code>Database-workflows-for-HD-EEG-data-in-R.Rmd</code></div>
    </div>

    
    
<p>This article introduces basic principles of working with databases in
R and demonstrates how to convert HD-EEG data stored in BrainVision or
HDF5 file format into database tables compatible with the
<code>diegr</code> package.</p>
<div class="section level2">
<h2 id="database-oriented-approach-in-diegr">Database-oriented approach in <code>diegr</code><a class="anchor" aria-label="anchor" href="#database-oriented-approach-in-diegr"></a>
</h2>
<p>Because of its versatility, EEG is used in a wide range of
applications, from clinical practice to research and commercial use. As
a result, the market offers a large variety of EEG systems produced by
different manufacturers. These systems often rely on distinct hardware
designs, accompanying software, and proprietary data formats. This
diversity poses a major challenge when developing R packages for working
with EEG and high-density EEG (HD-EEG) data.</p>
<p>To address this challenge, <code>diegr</code> adopts a
database-oriented approach and consistently builds on <code>dplyr</code>
throughout the package. EEG data can be handled either as in-memory
<code>data.frame</code>s or as database tables, using the same unified,
memory-efficient workflow. Existing datasets can be converted to
database tables using standard R database interfaces (concrete examples
are shown in further sections) or external tools.</p>
<div class="section level3">
<h3 id="why-a-database-oriented-approach">Why a database-oriented approach?<a class="anchor" aria-label="anchor" href="#why-a-database-oriented-approach"></a>
</h3>
<ul>
<li><p><strong>Memory efficiency</strong><br>
Large EEG and HD-EEG datasets do not need to be fully loaded into
memory.</p></li>
<li><p><strong>Consistent dplyr-based workflows</strong><br>
All data manipulation in diegr is built on <code>dplyr</code>, making
operations identical for in-memory <code>data.frame</code>s and database
tables.</p></li>
<li><p><strong>Unified data representation</strong><br>
Database tables follow the same tabular structure as
<code>data.frame</code>s, avoiding the need to support and maintain
multiple manufacturer-specific input formats.</p></li>
<li><p><strong>Long-term stability</strong><br>
Proprietary EEG file formats may change or become obsolete over time,
while relational databases rely on stable, well-established
standards.</p></li>
<li><p><strong>Scalability</strong><br>
The same analysis code can be used for small example datasets and for
large EEG recordings without modification.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="required-data-structure">Required data structure<a class="anchor" aria-label="anchor" href="#required-data-structure"></a>
</h3>
<p>Functions in the <code>diegr</code> package expect the input data to
be stored in a <em>long-format</em> table (e.g. a
<code>data.frame</code>, <code>tibble</code>, or a database table with
the same structure), where each row corresponds to a single observation
of the EEG signal at a given time point.</p>
<p>The dataset should contain the following columns:</p>
<ul>
<li><p><code>group</code> Identifier of the experimental group
(e.g. <em>control</em>, <em>patient</em>).</p></li>
<li><p><code>subject</code> Identifier of the subject.</p></li>
<li><p><code>sensor</code> Sensor (electrode) label (e.g. <em>E1</em>,
<em>Fz</em>).</p></li>
<li><p><code>epoch</code> Epoch number.</p></li>
<li><p><code>condition</code> Label of the experimental
condition.</p></li>
<li><p><code>time</code> Time points expressed as sampling indices (not
in milliseconds).</p></li>
<li><p><code>signal</code> EEG signal amplitude, typically in microvolts
(µV).<br>
Note: In most functions, the name of this column can be specified via an
argument, so it does not always have to be strictly called
<code>signal</code>.</p></li>
</ul>
<p><strong>Minimal requirements</strong></p>
<p>Not all columns listed above are required for every function, also
the order of the columns is arbitrary. However, <strong>if a variable is
present in the dataset, it must follow the naming convention described
above</strong>. This ensures that the functions can correctly identify
and process the data.</p>
<p><strong>Example</strong></p>
<p>An example of a valid data structure might look like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   subject sensor epoch time signal</span></span>
<span><span class="co">#&gt; 1      1     E1     1    1   2.34</span></span>
<span><span class="co">#&gt; 2      1     E1     1    2   2.10</span></span>
<span><span class="co">#&gt; 3      1     E1     1    3   1.98</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="database-basics-in-r">Database basics in R<a class="anchor" aria-label="anchor" href="#database-basics-in-r"></a>
</h2>
<p>Throughout this article, we rely on the <code>DBI</code>,
<code>dbplyr</code>, and <code>RSQLite</code> packages for working with
databases in R. Rather than covering database concepts in depth, we
focus on a small set of practical commands for connecting to a database,
reading tables into R, and creating database tables directly from R.</p>
<p>Readers who are new to working with databases in R may find it
helpful to consult, for example, the chapter <em>Databases</em> in
Hadley Wickham’s <em>R for Data Science</em>, available online at <a href="https://r4ds.hadley.nz/databases.html" class="external-link">https://r4ds.hadley.nz/databases.html</a>,
and <em>SQLite in R</em> tutorial from <em>Datacamp</em>: <a href="https://www.datacamp.com/tutorial/sqlite-in-r" class="external-link">https://www.datacamp.com/tutorial/sqlite-in-r</a>.<br>
A wide range of additional resources on working with databases in R is
also available.</p>
<p><strong>Basic database commands</strong></p>
<p>Below is a brief overview of basic database commands in R with
<code>DBI</code>, <code>dbplyr</code>, and <code>RSQLite</code>:</p>
<table class="table">
<colgroup>
<col width="30%">
<col width="70%">
</colgroup>
<thead><tr class="header">
<th>Command</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect()</a></code></td>
<td>Establishes a connection to a database. User specifies the database
driver and location.</td>
</tr>
<tr class="even">
<td><code><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect()</a></code></td>
<td>Closes the connection to the database.</td>
</tr>
<tr class="odd">
<td><code><a href="https://dbi.r-dbi.org/reference/dbListTables.html" class="external-link">dbListTables()</a></code></td>
<td>Lists all tables available in the connected database.</td>
</tr>
<tr class="even">
<td><code><a href="https://dbi.r-dbi.org/reference/dbListFields.html" class="external-link">dbListFields()</a></code></td>
<td>Lists all columns available in the selected database table.</td>
</tr>
<tr class="odd">
<td><code><a href="https://dbi.r-dbi.org/reference/dbReadTable.html" class="external-link">dbReadTable()</a></code></td>
<td>Reads a table from the database into R as a <code>data.frame</code>
or <code>tibble</code>.</td>
</tr>
<tr class="even">
<td><code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable()</a></code></td>
<td>Writes a <code>data.frame</code> or <code>tibble</code> from R into
the database as a new table.</td>
</tr>
<tr class="odd">
<td><code><a href="https://dbi.r-dbi.org/reference/dbRemoveTable.html" class="external-link">dbRemoveTable()</a></code></td>
<td>Deletes a database table from database.</td>
</tr>
<tr class="even">
<td><code><a href="https://dbi.r-dbi.org/reference/dbExecute.html" class="external-link">dbExecute()</a></code></td>
<td>Executes a SQL command that does not return a result, e.g., creating
or deleting tables.</td>
</tr>
<tr class="odd">
<td><code>tbl()</code></td>
<td>Creates a <code>dplyr</code>-friendly reference to a database table.
Allows using <code>dplyr</code> verbs (<code>filter</code>,
<code>select</code>, etc.) directly on database tables.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="converting-hd-eeg-data-into-database-tables">Converting HD-EEG data into database tables<a class="anchor" aria-label="anchor" href="#converting-hd-eeg-data-into-database-tables"></a>
</h2>
<p>As mentioned above, EEG (HD-EEG) data can be stored in a variety of
file formats. Such data can be converted into a database table using any
database software the user is familiar with, including tools and
packages available in R.</p>
<p>In this article, we demonstrate the data preparation workflow using
two file formats that are very common in the HD-EEG area:
<em>BrainVision</em> and <em>HDF5</em> (the latter being a frequent
export format from MATLAB). For other data formats, the overall
procedure is analogous. Moreover, in many cases these formats can be
converted to one of the two mentioned formats prior to importing the
data into R.</p>
<p>The workflow from an EEG data file to a database table can be divided
into four main steps: connecting to the database, importing the data
into R, converting the data to long format, and writing the data to a
database table.<br>
Each step is demonstrated in the following section with example
code.</p>
<div class="section level3">
<h3 id="step-1-connecting-to-the-database">Step 1 – Connecting to the database<a class="anchor" aria-label="anchor" href="#step-1-connecting-to-the-database"></a>
</h3>
<p>The first step is <strong>to establish a connection to the
database</strong>. Assume we have a database named
<em>mydatabase.db</em>. In R, you can connect to it using the
<code>DBI</code> and <code>RSQLite</code> packages as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                      dbname <span class="op">=</span> <span class="st">"mydatabase.db"</span><span class="op">)</span></span></code></pre></div>
<p>Note: <strong>When using <code>RSQLite</code>, the database file is
automatically created if it does not exist.</strong> For other database
backends (e.g., MySQL, PostgreSQL), the database must usually exist
beforehand, or you need to create it explicitly using
<code><a href="https://dbi.r-dbi.org/reference/dbExecute.html" class="external-link">dbExecute()</a></code> before connecting.</p>
</div>
<div class="section level3">
<h3 id="step-2-import-data-into-r">Step 2 – Import data into R<a class="anchor" aria-label="anchor" href="#step-2-import-data-into-r"></a>
</h3>
<p><strong>BrainVision file format</strong></p>
<p>An EEG recording in the BrainVision Core Data Format consists of
three separate files:</p>
<ul>
<li><p><strong>Header file (.vhdr)</strong>: A text file containing
recording parameters and further meta-information.</p></li>
<li><p><strong>Marker file (.vmrk)</strong>: A text file describing the
events that have been collected during the EEG data recording.</p></li>
<li><p><strong>Raw EEG data file (.eeg)</strong>: A binary file
containing the EEG data as well as additional signals recorded along
with the EEG (e.g. EOG).</p></li>
</ul>
<p>BrainVision files can be imported into R, for example, using the
<code>import_raw()</code> function from the <code>eegUtils</code>
package (available on GitHub):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install eegUtils from GitHub if not already installed</span></span>
<span><span class="co"># install.packages("remotes")</span></span>
<span><span class="co"># remotes::install_github("craddm/eegUtils")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">eegUtils</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Import data from a BrainVision .vhdr file</span></span>
<span><span class="va">FILE_VHDR</span> <span class="op">&lt;-</span> <span class="st">"name_of_the_eeg_data_file.vhdr"</span></span>
<span><span class="va">PATH</span> <span class="op">&lt;-</span> <span class="st">"the complete path to the file"</span></span>
<span><span class="va">data_eeg</span> <span class="op">&lt;-</span> <span class="fu">eegUtils</span><span class="fu">::</span><span class="fu">import_raw</span><span class="op">(</span><span class="va">FILE_VHDR</span>, file_path <span class="op">=</span> <span class="va">PATH</span><span class="op">)</span></span></code></pre></div>
<p>For more details on the <code>eegUtils</code> package, visit the
official documentation: <a href="https://craddm.github.io/eegUtils/" class="external-link">https://craddm.github.io/eegUtils/</a>.</p>
<p><strong>HDF5 file format</strong></p>
<p>HD-EEG data exported from MATLAB are often stored in the HDF5
(Hierarchical Data Format version 5) file format. It is a binary,
platform-independent format designed for efficient storage and access to
large and complex datasets. Data are organized in a hierarchical
structure, similar to a file system. In the R environment, the
<code>rhdf5</code> and <code>hdf5r</code> packages are available for
working with HDF5 files.</p>
<p>In the following, we present an example using the
<code>H5Fopen()</code> function from the <code>rhdf5</code> package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install rhdf5 if not already installed</span></span>
<span><span class="co"># install.packages("BiocManager")</span></span>
<span><span class="co"># BiocManager::install("rhdf5")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"rhdf5"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Import data from a HDF5 file</span></span>
<span><span class="va">PATH</span> <span class="op">&lt;-</span> <span class="st">"the complete path to the file"</span></span>
<span><span class="va">data_eeg</span> <span class="op">&lt;-</span> <span class="fu">rhdf5</span><span class="fu">::</span><span class="fu">H5Fopen</span><span class="op">(</span><span class="va">PATH</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-convert-data-to-a-long-format-table">Step 3 – Convert data to a long-format table<a class="anchor" aria-label="anchor" href="#step-3-convert-data-to-a-long-format-table"></a>
</h3>
<p>For the purposes of the <code>diegr</code> package, the data must be
available in so-called <em>long format</em>, where each row represents a
single observation.<br>
Imported EEG data are often stored in <em>wide format</em> and
distributed across multiple tables; moreover, individual subjects are
typically imported separately. It is therefore necessary to convert the
data to long format. The exact procedure depends on the specific
structure of the data, but functions such as <code>pivot_longer()</code>
and <code>add_column()</code> can be particularly useful in this
process.</p>
<p>A more detailed discussion of long and wide data formats can be found
in the <em>Tidy Data</em> chapter of Hadley Wickham’s <em>R for Data
Science</em>: <a href="https://r4ds.hadley.nz/data-tidy.html" class="external-link">https://r4ds.hadley.nz/data-tidy.html</a>.</p>
<p>Note: When working with raw (unprocessed) EEG data, preprocessing
needs to be carried out using other software or R packages (such as
<code>eegUtils</code>), since <code>diegr</code> assumes that the input
data have already been preprocessed.</p>
<p><strong>Example for HDF5 files</strong></p>
<p>Assume that, using the procedure described in Step 2, we have
imported an HDF5 file containing EEG data. The stimulus-locked signal is
stored in a component denoted as <code>dataT</code>, which is a
three-dimensional array with dimensions <em>number of sensors × number
of time points × number of epochs</em>.</p>
<p>Under these assumptions, the procedure for converting the
stimulus-locked data for one epoch into a long-format table may proceed
as follows:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">signal_array</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">dataT</span> <span class="co"># array with signal values</span></span>
<span><span class="va">n_epoch</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">signal_array</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="co"># number of epochs</span></span>
<span><span class="va">n_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">signal_array</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="co"># number of time points</span></span>
<span><span class="va">n_sensor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">signal_array</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># number of sensors</span></span>
<span></span>
<span><span class="co"># create long-format table for epoch 01</span></span>
<span><span class="va">df_stimul</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">signal_array</span><span class="op">[</span>, , <span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">df_stimul</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">sensornames</span> <span class="co"># vector with sensor labels</span></span>
<span><span class="va">data_epoch_01</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">df_stimul</span>,</span>
<span>  cols <span class="op">=</span> <span class="fu">everything</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  values_to <span class="op">=</span> <span class="st">"signal"</span>,</span>
<span>  names_to <span class="op">=</span> <span class="st">"sensor"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">n1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_epoch_01</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add epoch, subject and time numbers/IDs to the table</span></span>
<span><span class="va">data_epoch_01</span> <span class="op">&lt;-</span> <span class="va">data_epoch_01</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html" class="external-link">add_column</a></span><span class="op">(</span></span>
<span>    subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"subject_id"</span>, <span class="va">n1</span><span class="op">)</span>,</span>
<span>    epoch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">n1</span><span class="op">)</span>,</span>
<span>    time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n_time</span>, each <span class="op">=</span> <span class="va">n_sensor</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Notes:</p>
<ol style="list-style-type: decimal">
<li><p>Unfortunately, for MATLAB <code>.mat</code> files version 7.3 and
higher (HDF5-based), there is currently no straightforward way to read
sensor labels directly in R. Although the labels are stored in
<code>data$hdr$label</code>, the <code>rhdf5</code> package cannot
properly read MATLAB cell arrays containing strings, and the
<code>R.matlab</code> package does not support MAT v7.3 files.
Therefore, the sensor labels must be obtained using an alternative
approach.</p></li>
<li><p>The example above follows the
<em>subject–sensor–epoch–time–signal</em> structure. However, the code
can be readily adapted to accommodate additional variables, such as
different groups or experimental conditions, if they are present in the
data.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="step-4-writing-data-into-a-database-table">Step 4 – Writing data into a database table<a class="anchor" aria-label="anchor" href="#step-4-writing-data-into-a-database-table"></a>
</h3>
<p>When creating a database table, two main approaches can be used:</p>
<ol style="list-style-type: decimal">
<li><p>The first option is to convert the entire dataset into a
long-format table in R and then write it to the database using
<code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">DBI::dbWriteTable()</a></code>.</p></li>
<li><p>Alternatively, the database table can be built incrementally. For
epoched data, first epoch can be converted to long format separately and
written to the database by <code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">DBI::dbWriteTable()</a></code> as an
initial table. The remaining epochs are then converted to long format
one by one in a <code>for</code> loop, and appended to the existing
table using argument <code>append = TRUE</code> in
<code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">DBI::dbWriteTable()</a></code> function, as shown in the example
below.</p></li>
</ol>
<p>The second approach can be advantageous for HD-EEG data, as it avoids
holding a single, very large long-format <code>data.frame</code> in
memory.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create database table with the first epoch</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"table_name"</span>, <span class="va">data_epoch_01</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add other epochs to the table using for cycle</span></span>
<span><span class="co"># n_epoch denotes the number of epochs</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="va">n_epoch</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">data_epoch</span> <span class="op">&lt;-</span> <span class="va">...</span> <span class="co"># create long-format table as in step 3</span></span>
<span>  <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"table_name"</span>, <span class="va">data_epoch</span>, append <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="using-the-database-with-diegr">Using the database with diegr<a class="anchor" aria-label="anchor" href="#using-the-database-with-diegr"></a>
</h2>
<p>Most functions in the package are programmed to work directly with
input in the form of a database table. Thanks to the use of
<code>dplyr</code>, the usage is the same as for <code>data.frame</code>
inputs and is demonstrated in the following example.</p>
<p>Note: The SQLite database in the example is created in a temporary
directory and exists only for the duration of the R session. In real
applications, the database would typically be stored on disk or on a
database server.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">epochdata</span>, package <span class="op">=</span> <span class="st">"diegr"</span><span class="op">)</span></span>
<span><span class="co"># create connection to the database in a temporary directory</span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span></span>
<span>  <span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".sqlite"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># create a database table from epochdata</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"epochdb"</span>, <span class="va">epochdata</span><span class="op">)</span></span>
<span><span class="co"># read the table</span></span>
<span><span class="va">epochdb_table</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"epochdb"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">epochdb_table</span><span class="op">)</span></span>
<span><span class="co">#&gt; Source:   SQL [?? x 5]</span></span>
<span><span class="co">#&gt; Database: sqlite 3.51.1</span></span>
<span><span class="co">#&gt;   time signal epoch sensor subject</span></span>
<span><span class="co">#&gt;  &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  </span></span>
<span><span class="co">#&gt; 1     1  13.1  1     E1     1      </span></span>
<span><span class="co">#&gt; 2     1  16.5  1     E2     1 </span></span></code></pre></div>
<p>From the output of <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>, it is clear that the
<code>epoch</code> and <code>subject</code> columns are of type
character. These columns therefore need to be handled as character
variables or converted to an appropriate type (numeric/integer) before
being used in <code>diegr</code> or <code>dplyr</code> functions.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># convert the type of the columns</span></span>
<span><span class="va">epochdb_table</span> <span class="op">&lt;-</span> <span class="va">epochdb_table</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">subject</span><span class="op">)</span>,</span>
<span>    epoch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">epoch</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># pick data directly from the database table</span></span>
<span><span class="fu"><a href="../reference/pick_data.html">pick_data</a></span><span class="op">(</span><span class="va">epochdb_table</span>,</span>
<span>  subject_rg <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sensor_rg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"E1"</span>, <span class="st">"E65"</span><span class="op">)</span>,</span>
<span>  epoch_rg <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>  time_rg <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;  Source:   SQL [?? x 5]</span></span>
<span><span class="co">#&gt;  Database: sqlite 3.51.1 </span></span>
<span><span class="co">#&gt;    time signal epoch sensor subject</span></span>
<span><span class="co">#&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1    10  19.6      1 E1           1</span></span>
<span><span class="co">#&gt; 2    10  -2.66     1 E65          1</span></span>
<span><span class="co">#&gt; 3    10   1.99     2 E1           1</span></span>
<span><span class="co">#&gt; 4    10   4.90     2 E65          1</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com" class="external-link">plotly</a></span><span class="op">)</span></span>
<span><span class="co"># plot interactive epoch-boxplot for subject 1 and electrode E65 directly from the database</span></span>
<span><span class="fu"><a href="../reference/pick_data.html">pick_data</a></span><span class="op">(</span><span class="va">epochdb_table</span>,</span>
<span>  subject_rg <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sensor_rg <span class="op">=</span> <span class="st">"E65"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/boxplot_epoch.html">boxplot_epoch</a></span><span class="op">(</span>amplitude <span class="op">=</span> <span class="st">"signal"</span>,</span>
<span>                time_lim <span class="op">=</span> <span class="fl">10</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">layout</span><span class="op">(</span> <span class="co"># rewrite yaxis title due to html render</span></span>
<span>    yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"μV"</span><span class="op">)</span> </span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"visdat":{"2c81733ca107":["function () ","plotlyVisDat"]},"cur_data":"2c81733ca107","attrs":{"2c81733ca107":{"x":{},"y":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"box","hovertext":["Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14"],"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Time point"},"yaxis":{"domain":[0,1],"automargin":true,"title":"μV"},"title":"","hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"fillcolor":"rgba(31,119,180,0.5)","x":[10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20,10,11,12,13,14,15,16,17,18,19,20],"y":[-2.6622889041900635,5.239593505859375,0.21878740191459656,0.94194710254669189,15.019224166870117,1.9626642465591431,-8.4808206558227539,2.8549644947052002,-3.7491915225982666,-0.454510897397995,-0.37278404831886292,4.9035239219665527,8.3516445159912109,1.5535448789596558,-3.2307462692260742,0.82105475664138794,5.4740281105041504,5.1506137847900391,8.2047491073608398,11.624226570129395,7.8856840133666992,1.9454036951065063,1.6172536611557007,-2.0758190155029297,0.83221757411956787,7.8314146995544434,2.2121539115905762,-4.7596321105957031,3.6942110061645508,4.4773635864257812,-3.3881678581237793,0.27332144975662231,0.3806648850440979,2.6293377876281738,8.9308090209960938,10.372890472412109,-0.30779087543487549,-0.34896498918533325,-3.8716063499450684,-4.3824558258056641,1.4695069789886475,2.1950657367706299,3.9213371276855469,3.2821228504180908,-1.5666570663452148,0.73577052354812622,2.6764330863952637,-0.47288614511489868,-1.6277186870574951,-0.0078840479254722595,1.8081129789352417,-1.6434317827224731,-4.2763757705688477,-2.1512448787689209,0.11542306840419769,-1.6721788644790649,0.20071987807750702,-6.6976685523986816,-7.7604503631591797,-7.273188591003418,-2.7257256507873535,-0.74476820230484009,-1.978050708770752,-1.8462104797363281,2.0398578643798828,2.8711659908294678,12.102944374084473,14.672438621520996,14.462520599365234,11.744317054748535,13.258547782897949,19.182239532470703,14.698263168334961,9.7050142288208008,9.438873291015625,14.056033134460449,14.907628059387207,1.1959306001663208,2.4931268692016602,-2.5658185482025146,-1.897327184677124,1.9756669998168945,1.6197667121887207,2.5265302658081055,2.4439311027526855,1.4483897686004639,6.2272777557373047,3.8141095638275146,-2.7262489795684814,-1.0052834749221802,0.78226912021636963,-1.1243621110916138,-2.953904390335083,-0.19422295689582825,-1.1890795230865479,-3.5899462699890137,-3.3907029628753662,-4.052088737487793,-5.5973525047302246,-7.3759551048278809,-2.4230918884277344,-2.259624719619751,-0.35897490382194519,3.0568342208862305,3.6959798336029053,-3.6467785835266113,-4.7731161117553711,0.19074982404708862,-1.2216815948486328,2.4738242626190186,-6.0759463310241699,-4.3935108184814453,0.35700201988220215,-0.15886232256889343,-3.2243735790252686,-6.2548346519470215,-4.2525467872619629,-1.9218916893005371,-1.2218326330184937,-3.0419871807098389,-3.684011697769165,-0.13458919525146484,-5.9056239128112793,-6.9551863670349121,-7.2865543365478516,-5.6496186256408691,-3.8189034461975098,-5.6671404838562012,-3.2613153457641602,-2.00638747215271,1.9479389190673828,-1.9277119636535645,2.1612284183502197,3.9424417018890381,3.7551195621490479,0.78454405069351196,-4.5891475677490234,-1.2527177333831787,0.35364833474159241,-2.2084259986877441,-2.8934605121612549,-2.7080674171447754,-3.9421491622924805,110.42935180664062,111.29965209960938,110.04114532470703,112.40159606933594,116.69001770019531,113.93140411376953,111.75457763671875,106.60502624511719,105.42090606689453,110.33756256103516,111.54541778564453],"type":"box","hovertext":["Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 1","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 2","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 3","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 4","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 5","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 6","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 7","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 8","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 9","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 10","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 11","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 12","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 13","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14","Epoch : 14"],"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># close the database connection (at the end of work)</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h4>
<p>Wickham H., Cetinkaya-Rundel M., Grolemund G. <em>R for Data Science:
Import, Tidy, Transform, Visualize, and Model Data (2nd Edition).</em>
O’Reilly Media; 2023. Available online at <a href="https://r4ds.hadley.nz" class="external-link">https://r4ds.hadley.nz</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zdeňka Geršlová.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
